[tool.ruff]
line-length = 88
target-version = "py311"

[tool.ruff.lint]
# REASONABLE production-ready rules (not overly strict)
# Focus on critical issues: syntax errors, imports, basic style
select = [
    "E4",   # Import errors only (not E501 line length)
    "E7",   # Statement errors
    "E9",   # Runtime errors  
    "F",    # Pyflakes (undefined names, unused imports)
    "I",    # Import sorting
    "W6",   # Warnings that matter
]

# Ignore common issues that don't affect functionality
ignore = [
    "E501",   # Line too long (black handles this)
    "E203",   # Whitespace before ':' (conflicts with black)
    "E402",   # Module level import not at top (sometimes needed)
    "F401",   # Unused imports in __init__.py files  
    "F841",   # Assigned but never used (common in development)
    "I001",   # Import block is un-sorted (isort handles this)
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "F403", "E402"]  # Allow all imports in init files
"test_*.py" = ["F401", "F841", "E501"]    # Relaxed rules for tests
"**/tests/**" = ["F401", "F841", "E501"]  # Relaxed rules for test directory
"main.py" = ["E402"]                      # Allow imports after sys.path
"src/config/__init__.py" = ["F401", "F403"]
"src/monitoring/__init__.py" = ["F401", "F403"]
"src/api/__init__.py" = ["F401", "F403"]
"src/trading/__init__.py" = ["F401", "F403"]
"src/ultra_low_latency/__init__.py" = ["F401", "F403"]
"src/neuromorphic/__init__.py" = ["F401", "F403"]
"src/foundation_models/__init__.py" = ["F401", "F403"]
"src/mamba_ssm/__init__.py" = ["F401", "F403"]

[tool.ruff.lint.isort]
known-first-party = ["src"]

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "-ra -q --strict-markers --strict-config"
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
markers = [
  "slow: marks tests as slow",
  "integration: marks tests as integration tests",
  "unit: marks tests as unit tests", 
  "hardware: marks tests that require specific hardware",
  "real_data: marks tests that require real market data APIs",
]
